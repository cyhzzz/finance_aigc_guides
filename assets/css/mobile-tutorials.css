/**
 * 核心教程页面移动端专用样式
 * 解决内容显示不全、字体大小差异过大的问题
 */

@media (max-width: 768px) {

    /* ===========================
       全局重置与约束
       =========================== */

    /* 强制所有容器可滚动 */
    .slide-container,
    .slide-content {
        overflow: visible !important;
        max-height: none !important;
        height: auto !important;
    }

    /* ===========================
       字体大小严格统一
       =========================== */

    /* 一级标题 - 章节标题 */
    .slide-content > h1,
    .slide-content > .content-grid > div > h1,
    .display-title {
        font-size: 1.5rem !important;
        line-height: 1.3 !important;
        margin-bottom: 0.8rem !important;
        word-wrap: break-word;
        overflow-wrap: break-word;
    }

    /* 二级标题 - 小节标题 */
    .slide-content h2 {
        font-size: 1.25rem !important;
        line-height: 1.4 !important;
        margin-top: 1.2rem !important;
        margin-bottom: 0.6rem !important;
    }

    /* 三级标题 */
    .slide-content h3 {
        font-size: 1.1rem !important;
        line-height: 1.4 !important;
        margin-top: 1rem !important;
        margin-bottom: 0.5rem !important;
    }

    /* 正文文本 - 统一基准 */
    .slide-content p,
    .slide-content .lead-text,
    .slide-content li,
    .slide-content td,
    .slide-content th,
    .slide-content blockquote {
        font-size: 0.9rem !important;
        line-height: 1.7 !important;
        margin-bottom: 0.8rem !important;
    }

    /* 副标题/标签 */
    .section-subtitle {
        font-size: 0.95rem !important;
        line-height: 1.5 !important;
        margin-bottom: 0.8rem !important;
    }

    /* 标签/徽章 */
    .highlight-bg,
    .tag,
    .badge {
        font-size: 0.75rem !important;
        padding: 0.3rem 0.6rem !important;
        display: inline-block;
        margin: 0.2rem 0.2rem 0.2rem 0 !important;
    }

    /* 引用块 */
    .quote-block,
    blockquote {
        font-size: 0.85rem !important;
        padding: 0.8rem !important;
        margin: 0.8rem 0 !important;
        line-height: 1.6 !important;
    }

    /* 小号文本 */
    small,
    .small-text,
    .section-label,
    .stat-label {
        font-size: 0.75rem !important;
        line-height: 1.4 !important;
    }

    /* ===========================
       间距与布局优化
       =========================== */

    .slide-content {
        padding: 2rem 1.5rem !important;
    }

    /* 内容网格 - 单列堆叠 */
    .content-grid {
        display: flex !important;
        flex-direction: column !important;
        gap: 1rem !important;
    }

    /* 双栏布局改为单栏 */
    .two-column,
    .split-layout {
        display: flex !important;
        flex-direction: column !important;
        gap: 1rem !important;
    }

    /* ===========================
       特殊元素优化
       =========================== */

    /* 列表优化 */
    ul, ol {
        padding-left: 1.5rem !important;
        margin-bottom: 1rem !important;
    }

    li {
        margin-bottom: 0.5rem !important;
    }

    /* 代码块 */
    pre, code {
        font-size: 0.8rem !important;
        overflow-x: auto !important;
        white-space: pre-wrap !important;
        word-break: break-all !important;
    }

    /* 表格响应式 */
    table {
        font-size: 0.85rem !important;
        display: block !important;
        overflow-x: auto !important;
    }

    /* 图片响应式 */
    img {
        max-width: 100% !important;
        height: auto !important;
        display: block !important;
    }

    /* ===========================
       幻灯片导航优化
       =========================== */

    /* 隐藏右侧目录，使用底部导航 */
    .toc-nav {
        display: none !important;
    }

    /* 底部导航栏 */
    .mobile-toc-nav {
        display: flex !important;
    }

    /* 幻灯片切换按钮 */
    .nav-arrows {
        position: fixed !important;
        bottom: 5rem !important;
        right: 1rem !important;
        z-index: 99 !important;
        display: flex !important;
        gap: 0.5rem !important;
    }

    .nav-arrow {
        width: 44px !important;
        height: 44px !important;
        min-width: 44px !important;
        min-height: 44px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        background: var(--charcoal) !important;
        color: var(--rice) !important;
        border-radius: 50% !important;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2) !important;
        transition: transform 0.2s ease !important;
    }

    .nav-arrow:active {
        transform: scale(0.95) !important;
    }

    /* 隐藏幻灯片底部的页码等不必要元素 */
    .slide-footer span:not(.nav-arrow) {
        display: none !important;
    }

    /* ===========================
       防止内容溢出
       =========================== */

    * {
        overflow-wrap: break-word !important;
        word-wrap: break-word !important;
        word-break: break-word !important;
        hyphens: auto !important;
    }

    /* 防止长单词或URL溢出 */
    h1, h2, h3, h4, h5, h6, p, li, td, th {
        overflow-wrap: anywhere !important;
    }

    /* ===========================
       提升可读性的间距
       =========================== */

    /* 段落间距 */
    .slide-content > p + p,
    .slide-content > div > p + p {
        margin-top: 1rem !important;
    }

    /* 标题后的间距 */
    .slide-content > h1 + p,
    .slide-content > h2 + p,
    .slide-content > h3 + p {
        margin-top: 0.8rem !important;
    }

    /* ===========================
       特定页面元素优化
       =========================== */

    /* 统计数据卡片 */
    .stats-grid {
        display: grid !important;
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 1rem !important;
        margin: 1.5rem 0 !important;
    }

    .stat-number {
        font-size: 1.8rem !important;
        line-height: 1 !important;
        margin-bottom: 0.3rem !important;
    }

    .stat-label {
        font-size: 0.75rem !important;
        line-height: 1.3 !important;
    }

    /* 高亮框/提示框 */
    .highlight-box,
    .tip-box,
    .warning-box,
    .info-box {
        font-size: 0.85rem !important;
        padding: 0.8rem !important;
        margin: 1rem 0 !important;
    }

    /* ===========================
       交互优化
       =========================== */

    /* 增大触摸目标 */
    a:not(.nav-logo), button, .nav-arrow, .toc-item {
        min-height: 44px !important;
        min-width: 44px !important;
    }

    /* 触摸反馈 */
    .nav-arrow:active,
    .toc-item:active {
        opacity: 0.7 !important;
        transform: scale(0.97) !important;
    }
}

/* ===========================
   小屏手机进一步优化
   =========================== */

@media (max-width: 480px) {

    .slide-content {
        padding: 1.5rem 1rem !important;
    }

    .display-title,
    h1 {
        font-size: 1.3rem !important;
    }

    h2 {
        font-size: 1.15rem !important;
    }

    p, .lead-text {
        font-size: 0.85rem !important;
    }

    .stats-grid {
        grid-template-columns: 1fr !important;
        gap: 0.8rem !important;
    }
}

/* ===========================
   横屏模式优化
   =========================== */

@media (max-width: 768px) and (orientation: landscape) {

    .slide-content {
        padding: 1.5rem !important;
    }

    .display-title {
        font-size: 1.3rem !important;
    }

    /* 横屏时减少垂直间距 */
    .content-grid > div,
    .slide-content > div {
        margin-bottom: 0.5rem !important;
    }
}
